<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device.width, initial-scale=1">
        
        <title>New Haven County, State of Mayflower</title>

        <!-- Leaflet -->
        <link rel="stylesheet" href="lib/leaflet/leaflet.css" />
        <script src="lib/leaflet/leaflet.js"></script>

        <!-- leaflet-geojson-vt -->
        <script src="https://unpkg.com/geojson-vt@3.2.0/geojson-vt.js"></script>
        <script src="js/leaflet-geojson-vt.js"></script>

        <!-- geojson data -->
        <script src="data/roads.geojson"></script>
        <script src="data/buildings.geojson"></script>
        <script src="data/water_areas.geojson"></script>
        <script src="data/landcover.geojson"></script> 
        <script src="data/water_lines.geojson"></script>
        <script src="data/amenity_polygons.geojson"></script>

        <style>
            html, body, #map {
                width: 100%;
                height: 100%;
                padding: 0;
                margin: 0;
            }
        </style>
    </head>
        
    <body>
        <h1>New Haven County, State of Mayflower</h1>
        <div id="map"></div>
        <script>
            var map = L.map('map');

            function landmassStyle(feature){
                return {
                    fillColor:'green',
                    weight:2,
                    opacity:0.7,
                    color:'green',
                    fillOpacity:0.3
                }
            }

            function waterStyle(feature){
                return {
                    fillColor:'blue',
                    weight:1,
                    opacity:0.5,
                    color:'blue',
                    fillOpacity:0.2
                }
            }

            function buildingStyle(feature){
                return {
                    fillColor:'lightGray',
                    weight:1,
                    opacity:1,
                    color:'gray',
                    fillOpacity:0.5
                }
            }

            function roadStyle(feature){
                return {
                    weight:2,
                    opacity:0.75,
                    color:'black'
                }
            }

            function amenityStyle(feature){
                return {
                    weight:1,
                    opacity:0.5,
                    color:'brown',
                    fillColor:'brown',
                    fillOpacity:0.2
                }
            }

            function buildingInteraction(feature, layer) {
                layer.on({
                    mouseover: function () {
                        this.setStyle({
                            'fillColor': '#b45501',
                        });
                    },
                    mouseout: function () {
                        this.setStyle({
                            'fillColor': 'lightGray',
                        });
                    }
                });
                var popupContent = '<table>';
                for (var p in feature.properties) {
                    popupContent += '<tr><td>' + p + ':</td><td><b>' + feature.properties[p] + '</b></td></tr>';
                }
                popupContent += '</table>';
                layer.bindPopup(popupContent);
            }

            var water_areas = L.geoJson(water_areas,{style:waterStyle}).addTo(map);
            var landcover = L.geoJson(landcover,{style:landmassStyle}).addTo(map);
            var water_lines = L.geoJson(water_lines,{style:waterStyle}).addTo(map);
            var roadsLayer = L.geoJson(roads,{style:roadStyle}).addTo(map);
            var buildingsLayer = L.geoJson(buildings,{style:buildingStyle,onEachFeature: buildingInteraction}).addTo(map);

            map.fitBounds(landcover.getBounds());
        </script>
    </body>
</html>